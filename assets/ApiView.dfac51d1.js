import{o as r,c as i,r as _,a as c,t as d,n as M,F as p,b as S,d as A,e as y,f as R,g as h,u as f,h as g,i as w,j,k as C}from"./index.c3b4689f.js";class Z{constructor(t,s){this.start=t,this.end=s}}class B{constructor(t,s,n){this.entry=t,this.titleMatches=s,this.textMatches=n}}class H{constructor(t,s){this.title=t,this.text=s}}function F(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}class ${constructor(t){this.terms=t,this.regex=new RegExp(this.terms.map(F).join("|"),"gmi")}}function E(e,t){const s=[];for(const n of e.matchAll(t.regex))s.push(new Z(n.index,n.index+n[0].length));return s}function D(e,t){const s=E(t.title,e),n=E(t.text,e);return!s.length&&!n.length?null:new B(t,s,n)}function U(e,t){const s=[];for(const n of t){const a=D(e,n);a&&s.push(a)}return s}function Q(e){function t(s,n){return s.length==0?n.length==0?0:100:n.length==0?-100:s[0].start==0?n[0].start==0?0:-1:n[0].start==0?1:0}return e.sort((s,n)=>{let a=t(s.titleMatches,n.titleMatches);return a==0?s.entry.title.localeCompare(n.entry.title):a})}function V(e){const t=new Set(e.split(" "));return t.delete(""),new $(Array.from(t))}class G{constructor(t){this.entries=t,this.cache=[],this.lastQuery=new $([])}search(t){if(!t.terms.length)return[];let s=U(t,this.entries);return s=Q(s),this.cache=s,this.lastQuery=t,s}}function Y(e){return[e,"#"+e]}function X(e,t){return z(e,t).map(Y)}function z(e,t){for(const s in t){const n=t[s];if(s===e)return[s];if(e in n)return[s,e]}return[]}function W(e){const t=[];for(const s in e){const n=e[s];for(const a in n){const o=n[a];t.push(new H(a,o.description))}}return t}const J={__name:"SearchBar",props:{entries:{type:Array,required:!0}},emits:["search"],setup(e){const{entries:t}=e,s=new G(t);function n(o){return V(o.target.value)}function a(o){const u=n(o);return s.search(u)}return(o,u)=>(r(),i("input",{type:"text",placeholder:"Search...",onInput:u[0]||(u[0]=l=>o.$emit("search",n(l),a(l)))},null,32))}},K={__name:"Highlighted",props:{text:{type:String,required:!0},regex:{type:RegExp,required:!0}},setup(e){const{text:t,regex:s}=e,n=[];let a=0;for(const o of t.matchAll(s))n.push(t.substring(a,o.index)),a=o.index+o[0].length,n.push(t.substring(o.index,a));return n.push(t.substring(a)),(o,u)=>(r(),i(p,null,_(n,(l,m)=>c("span",{class:M({highlight:m%2==1})},d(l),3)),64))}},ee=["href","title"],te={key:1},ne={key:0},T={__name:"SidebarItem",props:{name:{type:String,required:!0},active:{type:Array,required:!0},children:{type:Object,default:null},query:{type:$}},setup(e){const{name:t,active:s,children:n,query:a}=e,o=!n;return(u,l)=>{const m=S("SidebarItem",!0);return r(),i("li",{class:M({path:!o,active:e.active.includes(e.name)})},[c("a",{href:"#"+e.name,title:e.name},[e.query&&e.query.terms.join("").length>1?(r(),A(K,{text:e.name,regex:e.query.regex,key:e.query.regex.source},null,8,["text","regex"])):(r(),i("span",te,d(e.name),1))],8,ee),o?y("",!0):(r(),i("ul",ne,[(r(!0),i(p,null,_(e.children,(x,b)=>(r(),A(m,{name:b,active:e.active},null,8,["name","active"]))),256))]))],2)}}},se={key:0},re={key:1},ae={__name:"ApiSidebar",props:{api:{type:Object,required:!0},active:{type:Array,required:!0}},setup(e){const{api:t,active:s}=e,n=W(t),a=R(null),o=R([]),u=R(!1);function l(m,x){a.value=m,o.value=x,u.value=m.terms.length>0}return(m,x)=>(r(),i("aside",null,[h(J,{entries:f(n),onSearch:l},null,8,["entries"]),u.value?(r(),i("ul",re,[(r(!0),i(p,null,_(o.value,b=>(r(),A(T,{name:b.entry.title,active:e.active,query:a.value},null,8,["name","active","query"]))),256))])):(r(),i("ul",se,[(r(!0),i(p,null,_(e.api,(b,I)=>(r(),A(T,{name:I,children:b,active:e.active},null,8,["name","children","active"]))),256))]))]))}},ie={key:0,class:"comment"},P={__name:"Comment",props:{content:{type:String}},setup(e){return(t,s)=>e.content?(r(),i("span",ie,[g(" // "),c("span",null,d(e.content),1)])):y("",!0)}},oe={id:"PARAM_ALPHA",comment:"A string consisting ONLY of English letters.",regex:"[a-zA-Z]",response:"A string."},ce={id:"PARAM_ALPHAEXT",comment:"A string consisting ONLY of English letters, hyphens and underscores.",regex:"[a-zA-Z_-]",response:"A string."},le={id:"PARAM_ALPHANUM",comment:"A string consisting ONLY of digits and English letters.",regex:"[a-zA-Z0-9]",response:"A string."},ue={id:"PARAM_ALPHANUMEXT",comment:"A string consisting ONLY of digits, English letters, hyphens and underscores.",regex:"[a-zA-Z0-9_-]",response:"A string."},de={id:"PARAM_AUTH",comment:'The name of a valid "auth" plugin.',regex:"[a-z][a-z0-9_-]*"},me={id:"PARAM_BASE64",comment:"Base 64 encoded data.",regex:"(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?"},he={id:"PARAM_BOOL",comment:"A boolean value. True unless empty or one of [false, off, no].",response:"Either 0 (false) or 1 (true)."},fe={id:"PARAM_CAPABILITY",comment:"A valid capability name, like 'moodle/role:manage'.",regex:"([a-zA-Z0-9]+)/([^/]+?):(.+?)"},pe={id:"PARAM_CLEANHTML",comment:"HTML code."},Ae={id:"PARAM_EMAIL",comment:"An email address.",regex:"(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])"},ge={id:"PARAM_FILE",comment:"A safe file name (dangerous chars are stripped to protect against XSS, SQL injections and directory traversals).",response:"A file name."},ye={id:"PARAM_FLOAT",comment:"A real/floating point number using a dot as the separator (not localised).",regex:"[+-]?\\d+(\\.\\d+)?",response:'A real ("floating point") number.'},_e={id:"PARAM_LOCALISEDFLOAT",comment:"A localised real/floating point number. This is preferred for numbers typed in by the user.",regex:"[+-]?[\\d.,]+"},xe={id:"PARAM_HOST",comment:"A fully qualified domain name (FQDN) or an IPv4 dotted quad (IP address).",regex:"((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))|((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9]))"},be={id:"PARAM_INT",comment:"An integer.",regex:"[+-]?\\d+"},Re={id:"PARAM_LANG",comment:'A valid installed language in the current site (e.g. "en_us").',regex:"[a-z]{2,}(_[a-z0-9]{2,})*"},Pe={id:"PARAM_LOCALURL",comment:"A properly formatted URL that refers to the local server itself."},ve={id:"PARAM_NOTAGS",comment:"A string (HTML tags are stripped).",response:"A string."},Me={id:"PARAM_PATH",comment:"A relative path (dangerous chars are stripped to protect against XSS, SQL injections and directory traversals).",regex:"^([^/\\]+?[/\\])*?[^/\\]+?/?$"},$e={id:"PARAM_PEM",comment:"Privacy Enhanced Mail format.",regex:"-----BEGIN CERTIFICATE-----([\\s\\w/\\+=]+)-----END CERTIFICATE-----"},Ee={id:"PARAM_PERMISSION",comment:"A permission. One of CAP_INHERIT, CAP_ALLOW, CAP_PREVENT or CAP_PROHIBIT.",regex:"CAP_(INHERIT|ALLOW|PREVENT|PROHIBIT)"},Te={id:"PARAM_RAW",comment:"A string."},qe={id:"PARAM_RAW_TRIMMED",comment:"A string (leading and trailing whitespace are stripped).",response:"A string."},Se={id:"PARAM_SAFEDIR",comment:"A string consisting ONLY of digits, English letters, hyphens and underscores.",regex:"[a-zA-Z0-9_-]+",response:"A string."},ze={id:"PARAM_SAFEPATH",comment:"A string consisting ONLY of digits, English letters, slashes, hyphens and underscores.",regex:"[a-zA-Z0-9/_-]+",response:"A string."},Le={id:"PARAM_SEQUENCE",comment:'A sequence of numbers, such as "8" or "1,5,6,4,6,8,9". Numbers and commas only.',regex:"[0-9,]+"},Ne={id:"PARAM_TAG",comment:"The name of a tag (<> symbols are stripped)."},Oe={id:"PARAM_TAGLIST",comment:'A list of tags separated by commas (e.g. "interests, blogs", <> symbols are stripped).'},ke={id:"PARAM_TEXT",comment:"A string (may contain multi-language content tags)."},Ie={id:"PARAM_THEME",comment:"The name of a valid theme."},we={id:"PARAM_URL",comment:'A properly formatted URL. Requires a domain part (e.g. "http://localhost.localdomain/").',response:"A properly formatted URL."},je={id:"PARAM_USERNAME",comment:"A username.",regex:"[^-\\.@_a-z0-9]"},Ce={id:"PARAM_STRINGID",comment:"A valid string identifier."},Ze={id:"PARAM_CLEAN",comment:"A string.",deprecated:"2.0"},Be={id:"PARAM_TIMEZONE",comment:'A number between -13 and +13 or a string such as "America/North_Dakota/New_Salem" or "America/Port-au-Prince"'},He={id:"PARAM_COMPONENT",comment:'The name of a component, such as "mod_forum" or "core_rating" (or a short legacy subsystem name, e.g. "forum" or "rating").'},Fe={id:"PARAM_AREA",comment:"The name of an area used when addressing files, comments, ratings, etc.",regex:"[a-z][a-z0-9_]*"},De={id:"PARAM_PLUGIN",comment:'The name of a plugin, such as "forum" or "glossary".',regex:"[a-z][a-z0-9_]*"},Ue={alpha:oe,alphaext:ce,alphanum:le,alphanumext:ue,auth:de,base64:me,bool:he,capability:fe,cleanhtml:pe,email:Ae,file:ge,float:ye,localisedfloat:_e,host:xe,int:be,lang:Re,localurl:Pe,notags:ve,path:Me,pem:$e,permission:Ee,raw:Te,raw_trimmed:qe,safedir:Se,safepath:ze,sequence:Le,tag:Ne,taglist:Oe,text:ke,theme:Ie,url:we,username:je,stringid:Ce,clean:Ze,timezone:Be,component:He,area:Fe,plugin:De};function L(e){switch(e){case"int":case"float":return"number";case"bool":case"object":case"array":return e;case"timezone":return"timezone";default:return"string"}}function Qe(e){return Ue[e]}const Ve=["data-type"],Ge={key:0,class:"tooltip"},Ye=["data-type"],Xe=c("pre",null," - ",-1),v={__name:"VarType",props:{field:{type:Object,required:!0},isResponse:{type:Boolean,default:!1}},setup(e){var m;const{field:t,isResponse:s}=e,n=L(t.type);let a=t.type;t.nullable&&(a+="?");const o=Qe(t.type);let u=null,l=null;return o&&(l=o.id,t.nullable&&(l+=" (nullable)"),s?u=(m=o.response)!=null?m:o.comment:u=o.comment),(x,b)=>(r(),i("i",{"data-type":f(n),class:"with-tooltip"},[g(d(f(a))+" ",1),f(u)?(r(),i("div",Ge,[c("span",{"data-type":f(n)},d(f(l)),9,Ye),Xe,c("span",null,d(f(u)),1)])):y("",!0)],8,Ve))}},We={key:0,class:"comment separator"},Je=["data-type"],Ke=c("span",{class:"comment separator-end"},":",-1),et={key:1,class:"comment separator"},N={__name:"ObjectEntry",props:{name:{type:String,required:!0},field:{type:Object,required:!0},isResponse:{type:Boolean,default:!1}},setup(e){const{name:t,field:s,isResponse:n}=e,a=L(s.type);let o=s.default;return o!=null&&(a==="string"?o=`"${o}"`:a==="bool"&&(o=o===0?"true":"false")),(u,l)=>(r(),i("li",null,[c("span",{class:M({key:!0,required:e.field.required})},d(e.name),3),e.field.default!=null?(r(),i("span",We,[g("(defaults to "),c("span",{"data-type":f(a),style:{"font-weight":"normal"}},d(f(o)),9,Je),g(") "),Ke])):(r(),i("span",et,": ")),h(O,{field:e.field,"is-response":e.isResponse},null,8,["field","is-response"])]))}},tt={key:0},nt={key:1},st={key:2},O={__name:"Field",props:{field:{type:Object,required:!0},isArray:{type:Boolean,default:!1},isResponse:{type:Boolean,default:!1}},setup(e){return(t,s)=>{const n=S("Field",!0);return e.field.type==="object"?(r(),i("span",tt,[h(v,{field:e.field,"is-response":e.isResponse},null,8,["field","is-response"]),g(" { "),h(P,{content:e.field.description},null,8,["content"]),c("ul",null,[(r(!0),i(p,null,_(e.field.properties,(a,o)=>(r(),A(N,{name:o,field:a,"is-response":e.isResponse},null,8,["name","field","is-response"]))),256))]),g("} ")])):e.field.type==="array"?(r(),i("span",nt,[h(v,{field:e.field,"is-response":e.isResponse},null,8,["field","is-response"]),g(" [ "),h(P,{content:e.field.description},null,8,["content"]),c("ul",null,[c("li",null,[h(n,{field:e.field.items,isArray:!0,"is-response":e.isResponse},null,8,["field","is-response"])])]),g("] ")])):(r(),i("span",st,[h(v,{field:e.field,"is-response":e.isResponse},null,8,["field","is-response"]),h(P,{content:e.field.description},null,8,["content"])]))}}},rt={key:0},at={key:1},it=c("i",null,"No response.",-1),ot=[it],ct={__name:"Response",props:{response:{type:Object}},setup(e){return(t,s)=>e.response?(r(),i("code",rt,[c("li",null,[h(O,{field:e.response,"is-response":!0},null,8,["field"])])])):(r(),i("p",at,ot))}},lt={key:0},ut={key:1},dt=c("i",null,"No request parameters.",-1),mt=[dt],ht={__name:"Request",props:{request:{type:Object,required:!0}},setup(e){return(t,s)=>Object.keys(e.request).length?(r(),i("code",lt,[(r(!0),i(p,null,_(e.request,(n,a)=>(r(),A(N,{name:a,field:n},null,8,["name","field"]))),256))])):(r(),i("p",ut,mt))}},ft={class:"badge"},pt={key:0},q={__name:"Badge",props:{text:{type:String,required:!0},value:{type:String},color:{type:String,default:"var(--color-primary)"}},setup(e){return(t,s)=>{var n;return r(),i("span",ft,[e.value!=null?(r(),i("span",pt,d(e.text),1)):y("",!0),c("b",{style:w(`background-color:${e.color}`)},d((n=e.value)!=null?n:e.text),5)])}}},At={class:"badge-list"},gt={key:0},yt=c("b",null,"Requires",-1),_t=c("b",null,"Version",-1),xt={key:1},bt=c("b",null,"Deprecated",-1),Rt={key:2},Pt=c("b",null,"TODO",-1),vt=c("h3",null,"Request",-1),Mt=c("h3",null,"Response",-1),$t={__name:"DocumentedFunction",props:{body:{type:Object,required:!0}},setup(e){const{body:t}=e;let s="any";t.since&&(s="\u2265"+t.since);let n="none";return t.capabilities.length&&(n=t.capabilities.join(" | ")),(a,o)=>(r(),i(p,null,[c("div",At,[e.body.requiresLogin?(r(),A(q,{key:0,text:"Login required",color:"var(--color-badge-bad)"},null,8,["color"])):y("",!0),e.body.ajaxAllowed?y("",!0):(r(),A(q,{key:1,text:"No AJAX",color:"var(--color-badge-bad)"},null,8,["color"]))]),c("p",null,d(e.body.description),1),e.body.capabilities.length?(r(),i("div",gt,[yt,g(": "+d(f(n)),1)])):y("",!0),c("div",null,[_t,g(": "+d(f(s)),1)]),e.body.deprecated?(r(),i("div",xt,[bt,g(": "+d(e.body.deprecated),1)])):y("",!0),e.body.todo?(r(),i("div",Rt,[Pt,g(": "+d(e.body.todo),1)])):y("",!0),vt,h(ht,{request:e.body.request},null,8,["request"]),Mt,h(ct,{response:e.body.response},null,8,["response"])],64))}},Et={key:0},Tt={class:"big-items"},qt=["href"],k={__name:"DocumentedComponent",props:{name:{type:String},functions:{type:Object,required:!0}},setup(e){return(t,s)=>(r(),i(p,null,[e.name?(r(),i("h2",Et,d(e.name),1)):y("",!0),c("ul",Tt,[(r(!0),i(p,null,_(e.functions,(n,a)=>(r(),i("li",null,[c("a",{href:"#"+a,class:"item no-line"},[c("b",null,d(a),1),c("i",null,d(n.description),1)],8,qt)]))),256))])],64))}},St={__name:"Documentation",props:{api:{type:Object,required:!0},name:{type:String,required:!0}},setup(e){const{api:t,name:s}=e;let n=!1,a;for(const o in t){const u=t[o];if(o===s){a=u,n=!0;break}if(s in u){a=u[s];break}}return(o,u)=>(r(),i(p,null,[c("h1",null,d(e.name),1),f(n)?(r(),A(k,{key:0,functions:f(a)},null,8,["functions"])):(r(),A($t,{key:1,body:f(a)},null,8,["body"]))],64))}},zt=c("h1",null,"Overview",-1),Lt=c("p",null,"A collection of all web service functions available from the get go, sorted by component/plugin.",-1),Nt={__name:"Overview",props:{api:{type:Object,required:!0}},setup(e){return(t,s)=>(r(),i(p,null,[zt,Lt,(r(!0),i(p,null,_(e.api,(n,a)=>(r(),A(k,{name:a,functions:n},null,8,["name","functions"]))),256))],64))}},Ot=["href"],kt={__name:"Navigation",props:{path:{type:Array,required:!0}},setup(e){return(t,s)=>(r(),i("nav",null,[(r(!0),i(p,null,_(e.path,(n,a)=>(r(),i("span",null,[a>0?(r(),i("span",{key:a,class:"separator"})):y("",!0),(r(),i("a",{href:n[1],key:n[0]},d(n[0]),9,Ot))]))),256))]))}},wt={__name:"ApiView",props:{api:{type:Object,required:!0}},setup(e){const{api:t}=e,s=j(),n=R();function a(l){var x;const m=(l!=null?l:s.hash).substring(1);m!==n.value&&(n.value=m,(x=document.querySelector("main"))==null||x.scrollTo({top:0}))}a(),C((l,m)=>{a(l.hash)});function o(){let l=[["API Reference",""]];return n.value&&(l=l.concat(X(n.value,t))),l}function u(){return z(n.value,t)}return(l,m)=>(r(),i(p,null,[h(ae,{api:e.api,active:u()},null,8,["api","active"]),c("main",null,[h(kt,{path:o()},null,8,["path"]),n.value?(r(),A(St,{api:e.api,name:n.value,key:n.value},null,8,["api","name"])):(r(),A(Nt,{key:1,api:e.api},null,8,["api"]))])],64))}};export{wt as default};
